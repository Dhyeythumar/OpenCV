# OpenCV

This OpenCV package is used to create **Color Masks** of any Image/Video feed.<br/>
I have created this python model because sometimes it is hard to predict the HSV bound for a given image/video.
 
## Installation
I will upload this soon!!

## Import and Usage

Import as given below
```python
from color_filter import generate_mask as gen_mask
```

#### **Parameters to this function**
```python
hsv_range, mask, res = gen_mask(Image, (height, width))
```
This gen_mask function will return the HSV lower and upper bound, mask and the resultant image.

#### _Note:_
Here mentioning the height and the width is not required as it takes the default values as (400, 600) and resizes the image. <br />
But take care when you are using the default dimensions because they may lead to an error when performing any image operation \[due to different sizes\]. To avoid this simply mention the required dimensions.

To use this package see the following examples.
## Example for an Image:
This is an example of how to create a mask from a particular color from an image. See the code given below, here we are reading a watch image and attempting to create a mask for the yellow color. The generate_mask function is been imported from the colorfilter as gen_mask. This function will open a window with the sliders to set the HSV bounds of your choice.

> When you are done with selecting the values:
> 1. Click ESC or 'q' key to get the values.
> 2. To save the mask and res image generated by the function click 's'. 
```python

img = cv2.imread("../input/watch_image.jpg", cv2.IMREAD_COLOR)

hsv_range, mask, res = gen_mask(img)

print(hsv_range)
cv2.imshow('Original frame', img)
cv2.imshow('mask', mask)
cv2.imshow('resultant', res)
cv2.waitKey(0)
cv2.destroyAllWindows()

```
To view the full example [Refer](https://github.com/Dhyeythumar/OpenCV/blob/master/examples/image_example.py).

**Results of the above code:**
<table>
 <tr>
  <th>Input Image</th>
  <th>Output Image</th>
 </tr>
 <tr>
  <td width="50%"><img alt="input img" src="https://github.com/Dhyeythumar/OpenCV/blob/master/input/watch_image.jpg"></td>
  <td width="50%"><img alt="output img" src="https://github.com/Dhyeythumar/OpenCV/blob/master/output/resultant_watch_image.jpg"></td>
 </tr>
</table>
<hr/>

## Example for a Video feed:
This is an example of how to create a mask from a particular color from a video frame. See the code given below, here we are reading a live webcam frame and attempting to create a mask for the green color. For the very first frame, the gen_mask function will open a window with the sliders to set the HSV bounds of your choice \[You can exit and get the values or can save the mask and resultant image\]. 

> After this webcam feed will remain ON and you have two choices as:
> 1. If you want to again create the mask for another frame then click 'r' to repeat.
> 2. Else click ESC or 'q' to exit.
```python

if((len(hsv_range) == 0) & (redo == 1)):
    redo = 0
    hsv_range, static_mask, static_res = gen_mask(frame, dim)
else:
    hsv = cv2.cvtColor(frame, cv2.COLOR_BGR2HSV)
    lower_red = hsv_range[0]
    upper_red = hsv_range[1]

    mask = cv2.inRange(hsv, lower_red, upper_red)
    res = cv2.bitwise_and(frame, frame, mask=mask)

    cv2.imshow('frame', frame)
    cv2.imshow('mask', mask)
    cv2.imshow('res', res)

```
To view the full example [Refer](https://github.com/Dhyeythumar/OpenCV/blob/master/examples/video_example.py).

**Output:**<br/>
The following is the resultant video captured by webcam. In this I'm holding the mobile with the green color on the screen.

<img align="center" alt="output video" src="https://github.com/Dhyeythumar/OpenCV/blob/master/output/result_video.gif" width="50%">
